# 通知・リマインド機能

## 概要

システム内で発生する各種イベントに応じたメール通知・リマインド機能の詳細仕様を定義します。ユーザー種別ごとの通知設定と配信ロジックを含みます。

## 6. 通知・リマインド機能

### 6.1. 候補者向け通知

#### 6.1.1. 認証・登録関連

**認証コード送付**
- **トリガー**: メールアドレス入力完了時（仮登録時、メールアドレス変更時）
- **タイミング**: 即時送信
- **内容**: 
  - 4桁認証コード
  - 有効期限（30分）
  - 認証画面URL
- **配信条件**: メールアドレス形式が正しく、システムに登録可能な場合
- **再送機能**: 認証画面から再送信可能（1日最大5回まで）

**仮登録完了**
- **トリガー**: メールアドレス・パスワード登録完了時
- **タイミング**: 即時送信
- **内容**: 
  - 仮登録完了の案内
  - 本登録促進メッセージ
  - 本登録ページURL
  - サービス概要
- **配信条件**: 仮登録ステータス変更時

**本登録未完了リマインド**
- **トリガー**: 仮登録後、基本情報登録ページで途中離脱した場合
- **タイミング**: 1日後、3日後、7日後
- **内容**: 
  - 本登録未完了の案内
  - 本登録のメリット説明
  - 本登録ページURL
  - 簡単な入力手順案内
- **配信条件**: 仮登録ステータスのまま指定期間経過
- **停止条件**: 本登録完了、または退会

**本登録完了**
- **トリガー**: 基本情報入力完了時
- **タイミング**: 即時送信
- **内容**: 
  - 本登録完了の祝福メッセージ
  - 詳細情報登録促進
  - 求人応募促進
  - プロフィール編集ページURL
  - サービス活用ガイド
- **配信条件**: 本登録ステータス変更時

#### 6.1.2. 求人・スカウト関連

**おすすめ求人紹介**
- **トリガー**: 週次バッチ処理（毎週火曜日 9:00）
- **タイミング**: 週1回定期配信
- **内容**: 
  - 候補者の希望条件にマッチする新着求人（最大5件）
  - 求人情報（タイトル、業務内容、給与、勤務地、業種、職種）
  - 求人詳細ページURL
  - おすすめ理由の説明
- **配信条件**: 
  - 本登録済み
  - おすすめ求人メール受信設定がON
  - 最終ログインから3ヶ月以内
- **個別化**: 候補者の希望条件・経験・閲覧履歴に基づく

**スカウト受信**
- **トリガー**: 企業からスカウト受信時
- **タイミング**: 即時送信
- **内容**: 
  - スカウト受信の案内
  - 送信元企業名
  - 求人タイトル
  - スカウトメッセージの概要
  - メッセージページURL
  - 企業情報ページURL
- **配信条件**: 
  - スカウト受け取り設定がON
  - スカウトメール受信設定がON
  - ブロック企業に設定されていない

**スカウト未読リマインド**
- **トリガー**: スカウト受信後、未開封のまま一定期間経過
- **タイミング**: 1日後、3日後、7日後
- **内容**: 
  - 未読スカウトの案内
  - 送信元企業名
  - 求人タイトル
  - 返信期限の案内
  - メッセージページURL
- **配信条件**: 
  - スカウト未開封
  - スカウトメール受信設定がON
  - 企業がスカウトを取り消していない
- **停止条件**: スカウト開封、スカウト辞退、企業側でのスカウト取り消し

#### 6.1.3. メッセージ関連

**メッセージ受信**
- **トリガー**: 企業からメッセージ受信時
- **タイミング**: 即時送信
- **内容**: 
  - メッセージ受信の案内
  - 送信元企業名
  - 求人タイトル
  - メッセージの概要（最初の50文字）
  - メッセージページURL
- **配信条件**: 
  - メッセージメール受信設定がON
  - 送信元企業をブロックしていない

**メッセージ未読リマインド**
- **トリガー**: メッセージ受信後、未開封のまま一定期間経過
- **タイミング**: 1日後、3日後、7日後
- **内容**: 
  - 未読メッセージの案内
  - 送信元企業名
  - 求人タイトル
  - 返信の重要性
  - メッセージページURL
- **配信条件**: 
  - メッセージ未開封
  - メッセージメール受信設定がON
- **停止条件**: メッセージ開封、返信送信

#### 6.1.4. システム・その他

**運営からのお知らせ**
- **トリガー**: 管理者がお知らせ配信時（対象: 候補者）
- **タイミング**: 管理者指定（即時 or 予約配信）
- **内容**: 
  - お知らせタイトル
  - お知らせ本文
  - 関連リンク（必要に応じて）
- **配信条件**: 
  - 配信対象が「候補者」または「全体」
  - 強制配信 or お知らせメール受信設定がON

**パスワード再設定案内**
- **トリガー**: パスワード再設定リクエスト時
- **タイミング**: 即時送信
- **内容**: 
  - パスワード再設定用URL
  - 有効期限（1時間）
  - セキュリティに関する注意事項
- **配信条件**: 登録済みメールアドレスからのリクエスト
- **セキュリティ**: URLは1回限り有効、使用後は無効化

### 6.2. 企業向け通知

#### 6.2.1. 候補者・採用関連

**おすすめ候補者紹介**
- **トリガー**: 週次バッチ処理（毎週水曜日 10:00）
- **タイミング**: 週1回定期配信
- **内容**: 
  - 保存した検索条件や作成求人にマッチする新規登録候補者（最大10名）
  - 候補者情報（直近在籍企業名、所在地、性別、年齢、直近年収、経験業種、経験職種）
  - 候補者詳細ページURL
  - マッチング理由の説明
- **配信条件**: 
  - おすすめ候補者メール受信設定がON
  - 保存した検索条件または公開中の求人あり
  - 最終ログインから1ヶ月以内
- **個別化**: 企業の求人内容・検索履歴に基づく

**候補者の応募**
- **トリガー**: 候補者が求人応募時
- **タイミング**: 即時送信
- **内容**: 
  - 応募受信の案内
  - 応募候補者名（氏名は非表示）
  - 求人タイトル
  - 応募日時
  - メッセージページURL
  - 候補者プロフィールページURL
- **配信条件**: 
  - 応募通知メール受信設定がON
  - 対象求人の企業グループメンバー

**応募未対応リマインド**
- **トリガー**: 候補者応募後、一定期間未対応
- **タイミング**: 1日後、3日後、7日後
- **内容**: 
  - 未対応応募の案内
  - 応募候補者名
  - 求人タイトル
  - 応募からの経過日数
  - メッセージページURL
  - 対応の重要性に関するメッセージ
- **配信条件**: 
  - 応募への返信なし
  - 応募通知メール受信設定がON
- **停止条件**: 候補者への返信送信

**候補者の辞退**
- **トリガー**: 候補者がスカウト辞退時
- **タイミング**: 即時送信
- **内容**: 
  - 辞退通知
  - 辞退候補者名
  - 求人タイトル
  - 辞退理由
  - メッセージページURL
- **配信条件**: 
  - スカウト通知メール受信設定がON
  - スカウト送信者

#### 6.2.2. メッセージ関連

**メッセージ受信**
- **トリガー**: 候補者からメッセージ受信時
- **タイミング**: 即時送信
- **内容**: 
  - メッセージ受信の案内
  - 送信元候補者名
  - 対象求人タイトル
  - メッセージの概要（最初の50文字）
  - メッセージページURL
- **配信条件**: 
  - メッセージ通知メール受信設定がON
  - 対象求人の企業グループメンバー

**メッセージ未読リマインド**
- **トリガー**: メッセージ受信後、未開封のまま一定期間経過
- **タイミング**: 1日後、3日後、7日後
- **内容**: 
  - 未読メッセージの案内
  - 送信元候補者名
  - 対象求人タイトル
  - 返信の重要性
  - メッセージページURL
- **配信条件**: 
  - メッセージ未開封
  - メッセージ通知メール受信設定がON
- **停止条件**: メッセージ開封、返信送信

#### 6.2.3. 選考・面接関連

**選考結果登録リマインド**
- **トリガー**: 面談日から一定期間経過しても選考結果未登録
- **タイミング**: 3日後、7日後、10日後、14日後
- **内容**: 
  - 選考結果未登録の案内
  - 対象候補者名
  - 求人タイトル
  - 面談実施日
  - 候補者毎進捗管理ページURL
  - 選考結果登録の重要性
- **配信条件**: 
  - 面談日が登録済み
  - 選考結果が未登録
  - 選考通知メール受信設定がON
- **停止条件**: 選考結果登録完了

#### 6.2.4. アカウント・システム関連

**企業グループへの招待**
- **トリガー**: 他メンバーまたは管理者から招待送信時
- **タイミング**: 即時送信
- **内容**: 
  - 招待の案内
  - 招待元企業名
  - 企業グループ名
  - 招待者名
  - グループ参加用URL
  - 参加手順の説明
- **配信条件**: 招待対象のメールアドレス
- **セキュリティ**: 招待URLは7日間有効

**認証コード送付（企業グループ参加時）**
- **トリガー**: 招待メール内URL押下時
- **タイミング**: 即時送信
- **内容**: 
  - 4桁認証コード
  - 有効期限（30分）
  - 企業名・グループ名
- **配信条件**: 有効な招待URLからのアクセス

**アカウント登録完了（企業グループ参加完了時）**
- **トリガー**: 招待メールから企業グループへの参加完了時
- **タイミング**: 即時送信
- **内容**: 
  - 参加完了の祝福メッセージ
  - 企業名・企業グループ名
  - 付与された権限レベル
  - ログインページURL
  - 初期設定ガイド
- **配信条件**: グループ参加処理完了時

**求人掲載開始**
- **トリガー**: 管理画面で求人掲載承認時
- **タイミング**: 即時送信
- **内容**: 
  - 求人掲載開始の案内
  - 求人タイトル
  - 掲載開始日時
  - 求人詳細ページURL
  - 候補者への露出開始の案内
- **配信条件**: 
  - 求人作成者
  - 同じ企業グループの管理者
  - 求人通知メール受信設定がON

#### 6.2.5. 権限・設定変更関連

**企業グループからアカウント削除通知**
- **トリガー**: 自身のアカウントが企業グループから削除された時
- **タイミング**: 即時送信
- **内容**: 
  - アカウント削除の通知
  - 企業名・企業グループ名
  - 削除実行者名
  - 削除理由（任意）
  - 問い合わせ先情報
- **配信条件**: 削除対象ユーザー

**企業グループ内権限変更通知**
- **トリガー**: 自身の企業グループ内権限が変更された時
- **タイミング**: 即時送信
- **内容**: 
  - 権限変更の通知
  - 企業名・企業グループ名
  - 変更前権限・変更後権限
  - 変更実行者名
  - 新しい権限で利用可能な機能の説明
- **配信条件**: 権限変更対象ユーザー

**プラン変更通知**
- **トリガー**: 管理画面で契約プラン変更時
- **タイミング**: 即時送信
- **内容**: 
  - プラン変更の案内
  - 適用企業グループ名
  - 変更前プラン・変更後プラン
  - 適用開始日
  - プラン変更に伴う機能変更の説明
- **配信条件**: 
  - 対象企業グループの全メンバー
  - プラン変更通知メール受信設定がON

**追加チケット付与通知**
- **トリガー**: 管理画面から追加チケット付与時
- **タイミング**: 即時送信
- **内容**: 
  - 追加チケット付与の案内
  - 適用企業グループ名
  - 追加枚数
  - 追加チケット有効期限
  - 現在の総チケット数
  - チケット確認ページURL
- **配信条件**: 
  - 対象企業グループの全メンバー
  - チケット通知メール受信設定がON

#### 6.2.6. システム・その他

**運営からのお知らせ**
- **トリガー**: 管理者がお知らせ配信時（対象: 企業）
- **タイミング**: 管理者指定（即時 or 予約配信）
- **内容**: 
  - お知らせタイトル
  - お知らせ本文
  - 関連リンク（必要に応じて）
- **配信条件**: 
  - 配信対象が「企業」または「全体」
  - 強制配信 or お知らせメール受信設定がON

**パスワード再設定案内**
- **トリガー**: パスワード再設定リクエスト時
- **タイミング**: 即時送信
- **内容**: 
  - パスワード再設定用URL
  - 有効期限（1時間）
  - セキュリティに関する注意事項
  - 企業名・グループ名
- **配信条件**: 登録済みメールアドレスからのリクエスト

### 6.3. 管理者向け通知

#### 6.3.1. 候補者関連

**候補者の仮登録完了**
- **トリガー**: 候補者がメール・パスワード登録時
- **タイミング**: 即時送信
- **内容**: 
  - 新規仮登録の案内
  - 候補者ID
  - 登録メールアドレス
  - 登録日時
  - 管理画面候補者詳細ページURL
- **配信条件**: システム管理者の候補者登録通知設定がON

**候補者の本登録完了**
- **トリガー**: 候補者が基本情報入力完了時
- **タイミング**: 即時送信
- **内容**: 
  - 新規本登録の案内
  - 候補者名・候補者ID
  - 基本情報概要（年齢、居住地、直近企業等）
  - 管理画面候補者詳細ページURL
- **配信条件**: システム管理者の候補者登録通知設定がON

**候補者の書類アップロード**
- **トリガー**: 候補者が履歴書・経歴書アップロード時
- **タイミング**: 即時送信
- **内容**: 
  - 書類アップロードの案内
  - 候補者名・候補者ID
  - アップロードファイル名・種別
  - アップロード日時
  - 管理画面候補者詳細ページURL
  - 書類確認・転記作業の案内
- **配信条件**: システム管理者の書類アップロード通知設定がON

**候補者の会員情報登録・更新（週次）**
- **トリガー**: 週次バッチ（毎週月曜日 8:00）
- **タイミング**: 週1回定期配信
- **内容**: 
  - 過去1週間の会員情報更新サマリー
  - 新規登録者数・更新者数
  - 主要な更新内容の統計
  - 管理画面候補者一覧ページURL
- **配信条件**: システム管理者の週次レポート通知設定がON

**週次退会ユーザーリスト**
- **トリガー**: 週次バッチ（毎週月曜日 8:00）
- **タイミング**: 週1回定期配信
- **内容**: 
  - 過去1週間の退会者リスト
  - 候補者名・候補者ID・退会理由・退会日時
  - 退会理由の統計
  - 管理画面候補者詳細ページURL
- **配信条件**: システム管理者の週次レポート通知設定がON

#### 6.3.2. 企業関連

**企業ユーザー利用開始**
- **トリガー**: 企業ユーザーが企業グループに参加時
- **タイミング**: 即時送信
- **内容**: 
  - 新規企業ユーザー参加の案内
  - 企業名・企業ユーザー名・企業ユーザーID
  - 参加した企業グループ名
  - 付与された権限レベル
  - 管理画面企業詳細ページURL
- **配信条件**: システム管理者の企業ユーザー登録通知設定がON

**企業情報更新**
- **トリガー**: 企業グループ情報更新時
- **タイミング**: 即時送信
- **内容**: 
  - 企業情報更新の案内
  - 企業名・企業ID
  - 更新項目・更新内容の概要
  - 更新実行者名
  - 管理画面企業詳細ページURL
- **配信条件**: システム管理者の企業情報更新通知設定がON

#### 6.3.3. 求人・コンテンツ関連

**求人掲載申請**
- **トリガー**: 企業ユーザーが求人掲載申請時
- **タイミング**: 即時送信
- **内容**: 
  - 新規求人掲載申請の案内
  - 企業名・企業ID
  - 求人タイトル・求人概要
  - 申請日時
  - 管理画面求人詳細ページURL
  - 審査が必要な求人一覧ページURL
- **配信条件**: システム管理者の求人申請通知設定がON

#### 6.3.4. 採用・選考関連

**候補者内定通知**
- **トリガー**: 企業が候補者を内定にした時
- **タイミング**: 即時送信
- **内容**: 
  - 内定発生の案内
  - 候補者名・候補者ID
  - 企業名・求人タイトル
  - 内定日
  - 管理画面候補者毎進捗ページURL
- **配信条件**: システム管理者の内定通知設定がON

**候補者入社予定日決定通知**
- **トリガー**: 企業が候補者の入社予定日を登録時
- **タイミング**: 即時送信
- **内容**: 
  - 入社予定日決定の案内
  - 候補者名・候補者ID
  - 企業名・求人タイトル
  - 入社予定日
  - 管理画面候補者毎進捗ページURL
- **配信条件**: システム管理者の入社予定通知設定がON

### 6.4. 通知設定管理

#### 6.4.1. 候補者通知設定

**設定可能項目**
- スカウト受信通知: ON/OFF
- メッセージ受信通知: ON/OFF
- おすすめ求人紹介: ON/OFF
- 運営からのお知らせ: ON/OFF
- スカウト未読リマインド: ON/OFF
- メッセージ未読リマインド: ON/OFF

**デフォルト設定**
- 全ての通知: ON（ユーザーが任意で変更可能）

#### 6.4.2. 企業通知設定

**設定可能項目**
- 候補者応募通知: ON/OFF
- メッセージ受信通知: ON/OFF
- おすすめ候補者紹介: ON/OFF
- 求人掲載・承認通知: ON/OFF
- スカウトチケット関連通知: ON/OFF
- 運営からのお知らせ: ON/OFF
- 応募未対応リマインド: ON/OFF
- メッセージ未読リマインド: ON/OFF
- 選考結果登録リマインド: ON/OFF

**デフォルト設定**
- 全ての通知: ON（ユーザーが任意で変更可能）

#### 6.4.3. システム管理者通知設定

**設定可能項目**
- 候補者登録関連通知: ON/OFF
- 企業ユーザー登録関連通知: ON/OFF
- 求人申請関連通知: ON/OFF
- 書類アップロード通知: ON/OFF
- 内定・入社関連通知: ON/OFF
- 週次レポート通知: ON/OFF

### 6.5. 配信制御・技術仕様

#### 6.5.1. 配信頻度制限

**リマインド通知の制限**
- 同一イベントに対するリマインドは最大3回まで
- 同一ユーザーへの1日の通知総数制限: 10通
- 同一種別の通知間隔: 最低1時間

**一括配信の制限**
- おすすめ求人・候補者紹介: 週1回
- 週次レポート: 週1回
- 運営からのお知らせ: 管理者の裁量（ただし乱用防止機能あり）

#### 6.5.2. 配信停止・解除

**自動配信停止条件**
- メールアドレス無効（バウンス）
- ユーザーからの配信停止要求
- アカウント削除・退会
- 3ヶ月以上の未ログイン（一部通知のみ）

**配信再開条件**
- ユーザーによる設定変更
- 新規ログイン（未ログイン停止の場合）
- メールアドレス変更・確認完了

#### 6.5.3. テンプレート管理

**メールテンプレート構成**
- ヘッダー（ロゴ、サービス名）
- 本文（通知内容）
- フッター（配信停止リンク、問い合わせ先）
- レスポンシブデザイン対応

**変数・関数システム**
- ユーザー名: {user_name}
- 企業名: {company_name}
- 求人タイトル: {job_title}
- URL生成: {generate_url(type, id)}
- 日時フォーマット: {format_datetime(datetime, format)}

#### 6.5.4. 配信ログ・分析

**記録項目**
- 送信日時・送信先・通知種別
- 配信ステータス（成功、失敗、バウンス）
- 開封日時・開封率
- クリック日時・クリック率
- 配信停止・解除日時

**分析・改善**
- 通知種別ごとの開封率・クリック率分析
- ユーザーセグメント別の反応分析
- A/Bテスト機能（件名・本文の最適化）

## 関連ドキュメント

- [候補者向け機能詳細](./01_candidate_features.md)
- [企業向け機能詳細](./02_company_features.md)
- [管理者向け機能詳細](./03_admin_features.md)
- [データ要件](./04_data_requirements.md)
- [権限管理](./05_permissions.md) 